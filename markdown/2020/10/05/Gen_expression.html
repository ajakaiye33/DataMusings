<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Wrangling Data With Pythons Generative Expressions | DataPonderings</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Wrangling Data With Pythons Generative Expressions" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Magic of Generative Expression Function." />
<meta property="og:description" content="The Magic of Generative Expression Function." />
<link rel="canonical" href="https://ajakaiye33.github.io/DataMusings/markdown/2020/10/05/Gen_expression.html" />
<meta property="og:url" content="https://ajakaiye33.github.io/DataMusings/markdown/2020/10/05/Gen_expression.html" />
<meta property="og:site_name" content="DataPonderings" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-10-05T00:00:00-05:00" />
<script type="application/ld+json">
{"url":"https://ajakaiye33.github.io/DataMusings/markdown/2020/10/05/Gen_expression.html","@type":"BlogPosting","headline":"Wrangling Data With Pythons Generative Expressions","dateModified":"2020-10-05T00:00:00-05:00","datePublished":"2020-10-05T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://ajakaiye33.github.io/DataMusings/markdown/2020/10/05/Gen_expression.html"},"description":"The Magic of Generative Expression Function.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/DataMusings/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://ajakaiye33.github.io/DataMusings/feed.xml" title="DataPonderings" /><link rel="shortcut icon" type="image/x-icon" href="/DataMusings/images/favicon.ico"><link href="https://cdn.jsdelivr.net/npm/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper">
<a class="site-title" rel="author" href="/DataMusings/">DataPonderings</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewbox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger">
<a class="page-link" href="/DataMusings/about/">About Me</a><a class="page-link" href="/DataMusings/search/">Search</a><a class="page-link" href="/DataMusings/categories/">Tags</a>
</div>
      </nav>
</div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Wrangling Data With Pythons Generative Expressions</h1>
<p class="page-description">The Magic of Generative Expression Function.</p>
<p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-10-05T00:00:00-05:00" itemprop="datePublished">
        Oct 5, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      4 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i> 
      
        <a class="category-tags-link" href="/DataMusings/categories/#markdown">markdown</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h3"><a href="#introduction">Introduction</a></li>
<li class="toc-entry toc-h3"><a href="#efficiency--effectiveness">Efficiency &amp; Effectiveness</a></li>
<li class="toc-entry toc-h3"><a href="#elegance-and-simplicity">Elegance and Simplicity</a></li>
<li class="toc-entry toc-h3"><a href="#brevity-vs-readability">Brevity Vs Readability</a></li>
</ul>
<p><img src="/images/clean_data.jpg" alt=""></p>

<h3 id="introduction">
<a class="anchor" href="#introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction</h3>
<p>In recent times we have heard it in different quarters that <em>data is the new oil</em>
You will agree that this is a lofty designation that would elicit if anything
some eye-rolling episodes <img class="emoji" title=":smirk:" alt=":smirk:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png" height="20" width="20"></p>

<p>However I must point out as an aspiring Data Scientist &amp; Wrangler,  I believe
the assertion. The importance of data especially in the 21st century can not be
overemphasize. Nevertheless, if you aren’t convinced just yet, I suggest you read
<strong>Yuval Noah Harari</strong>’s <em>Homo Deus</em> <img class="emoji" title=":closed_book:" alt=":closed_book:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f4d5.png" height="20" width="20"></p>

<p>To continue with the above analogy, it’s evident that oil goes through various
processes and transformation before it’s certified useful in the multiple ways that
we currently oil.</p>

<p>Similarly, Data is basically
useless in its crude form until it is transformed. The process of transforming Data
has been dubbed as <em>Data Cleaning</em> or <em>Data Scrubbing</em> or <em>Data Wrangling</em>. The python
language has a lot of tools that make this cleaning process easy. I thought I’m
versed in the available data wrangling tools until when I discovered <strong>Generative Expressions</strong>
Therefore this post will be about How  efficient and elegant is python’s Generative Expressions especially  when compared to other methods like <em>for loop</em>, list comprehension etc.in the art and craft of Data Wrangling!</p>

<h3 id="efficiency--effectiveness">
<a class="anchor" href="#efficiency--effectiveness" aria-hidden="true"><span class="octicon octicon-link"></span></a>Efficiency &amp; Effectiveness</h3>
<p>According to  Peter Drucker, the father of management, effectiveness is doing
the right things, efficiency is doing things rightly. This definition may sound
confusing at first, but on deeper reflection, it actually hit the nail on the head.
You can be effective without necessarily be efficient. To demonstrate this concept.
I will use a real-life code examples.
Firstly, I will need to import an essential function from the sys python package.</p>

<p><code class="language-plaintext highlighter-rouge"># from sys import getsizeof</code></p>

<p>Extract odd number with for loop</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">odd_num_with_FL</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
      <span class="n">odd_num_with_FL</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</code></pre></div></div>

<p>Extract odd number with List Comprehension</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># get odd number
</span><span class="n">odd_num_with_LC</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></div>

<p>Extract odd number with generative expressions</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># get odd number using generative expressions
</span><span class="n">odd_num_with_GE</span> <span class="o">=</span> <span class="p">(</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">)</span> <span class="k">if</span> <span class="n">y</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div></div>

<p>The above three different ways we extracted the odd numbers are correct and effective but are all three examples efficient?</p>

<p>One way to measure code efficiency is the number of bytes an operation occupies in the computer memory. Without further ado, we can know the size our above code occupies in our system’s memory with the aid of <code class="language-plaintext highlighter-rouge">getsizeof</code> function from the <code class="language-plaintext highlighter-rouge">sys</code> package.</p>

<p>Let us see the bytes that each operation takes:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">odd_num_with_FL</span><span class="p">))</span>
</code></pre></div></div>
<p>406496 <code class="language-plaintext highlighter-rouge">bytes</code></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">odd_num_with_LC</span><span class="p">))</span>
</code></pre></div></div>
<p>406496 <code class="language-plaintext highlighter-rouge">#bytes</code></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">odd_num_with_GE</span><span class="p">))</span>
</code></pre></div></div>
<p>120 <code class="language-plaintext highlighter-rouge">#bytes</code></p>

<p>Wow! isn’t this amazing! Look at the difference in bytes. I understand. You aren’t alone. I was blown away when I encounter the power of the generative expression.</p>

<p>However, the magic behind this apparent efficiency lies in the concept of <em>lazing rendering or evaluation</em> as the generative expression saves little or nothing in the memory. You don’t believe me … let us see the code.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">odd_num_with_GE</span><span class="p">)</span>
</code></pre></div></div>
<p>&lt;generator object <genexpr> at 0x10453a840&gt;</genexpr></p>

<p>Unlike the output of the above code, the other code examples would print out the actual odd numbers, you can go ahead and print them out. Knock yourself out! <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20"></p>

<h3 id="elegance-and-simplicity">
<a class="anchor" href="#elegance-and-simplicity" aria-hidden="true"><span class="octicon octicon-link"></span></a>Elegance and Simplicity</h3>
<p>Efficiency, which we have tried to illustrate in the preceding session, could also be defined in the light of simplicity. Not for nothing did Austin Freeman, said <em>Simplicity is the Soul of efficiency</em>. Similarly, according to Leonardo Da Vinci, <em>Simplicity is the ultimate sophistication</em> and I make bold to say you don’t understand a concept or a phenomenon until you can render it as simple as possible. The same simplicity informs the  Zen of python.</p>

<p>We don’t need to complicate the already complicated process of Data Wrangling and Data Cleaning, to this end you can not but agree that any procedure or tool seeking to reduce the observed complexity would be welcome and embraced by all and sundry. The generative expression makes life easy, even in the thick and thin of the dirtiest of data.
Let illustrate this with the following
code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Clean the following List of words
</span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Hello</span><span class="se">\n</span><span class="s">'</span><span class="p">,</span> <span class="s">'My name'</span><span class="p">,</span> <span class="s">'is</span><span class="se">\n</span><span class="s">'</span><span class="p">,</span><span class="s">'Bob'</span><span class="p">,</span><span class="s">'How are'</span><span class="p">,</span> <span class="s">'doing</span><span class="se">\n</span><span class="s">'</span><span class="p">]</span>
</code></pre></div></div>

<p>Using the normal for loop to clean the above list of words</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">clean_words</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">word</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">' '</span><span class="p">):</span>
        <span class="n">clean_words</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">.</span><span class="n">strip</span><span class="p">().</span><span class="n">lower</span><span class="p">())</span>
</code></pre></div></div>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">clean_words</span><span class="p">)</span>
<span class="p">[</span><span class="s">'hello'</span><span class="p">,</span> <span class="s">'my'</span><span class="p">,</span> <span class="s">'name'</span><span class="p">,</span><span class="s">'is'</span><span class="p">,</span><span class="s">'bob'</span><span class="p">,</span><span class="s">'how'</span><span class="p">,</span><span class="s">'are'</span><span class="p">,</span><span class="s">'you'</span><span class="p">,</span> <span class="s">'doing'</span><span class="p">]</span>
</code></pre></div></div>
<p>Without the risk of sounding immodest, the above path would be the route taken by the majority of python newbies in solving this problem. This approach may be very much useful but appears ponderous. Just look at the number of lines of code written and the complex nested for loop. Can the above code be improved on with generative expression?</p>

<p>Here is the code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">clean_words_with_GE</span> <span class="o">=</span> <span class="p">(</span><span class="n">word</span><span class="p">.</span><span class="n">strip</span><span class="p">().</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">word</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">' '</span><span class="p">))</span>
</code></pre></div></div>
<p>The same result was achieved with just a line and also little, or no memory is utilized by lazy evaluation.</p>

<h3 id="brevity-vs-readability">
<a class="anchor" href="#brevity-vs-readability" aria-hidden="true"><span class="octicon octicon-link"></span></a>Brevity Vs Readability</h3>

<p>There is no doubt that the generative expression approach not only engenders efficiency, it also ensures simplicity. Like every other approach, it has its own drawbacks and limitations. And chief amongst the limitations is Readability. Our code may not pass the 7th Zen of Python’s rule, which admonished:’Readability Counts’. Therefore as you enjoy the new powers of generative expression equally ensures that your code is clear and readable.</p>

<p>I hope you enjoy this post. Till we meet again, happy coding<img class="emoji" title=":hammer:" alt=":hammer:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f528.png" height="20" width="20"></p>

  </div>
<a class="u-url" href="/DataMusings/markdown/2020/10/05/Gen_expression.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/DataMusings/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/DataMusings/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/DataMusings/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Data gymnastics... Enter Zen from there!.</p>
      </div>
    </div>

    <div class="social-links">
<ul class="social-media-list"><li><a rel="me" href="https://twitter.com/ajakzheddy" title="ajakzheddy"><svg class="svg-icon grey"><use xlink:href="/DataMusings/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
