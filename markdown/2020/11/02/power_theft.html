<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Framework of Power Theft Detector Model | DataPonderings</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Framework of Power Theft Detector Model" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="How I Approach A Data Problem." />
<meta property="og:description" content="How I Approach A Data Problem." />
<link rel="canonical" href="https://ajakaiye33.github.io/DataMusings/markdown/2020/11/02/power_theft.html" />
<meta property="og:url" content="https://ajakaiye33.github.io/DataMusings/markdown/2020/11/02/power_theft.html" />
<meta property="og:site_name" content="DataPonderings" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-11-02T00:00:00-06:00" />
<script type="application/ld+json">
{"description":"How I Approach A Data Problem.","url":"https://ajakaiye33.github.io/DataMusings/markdown/2020/11/02/power_theft.html","@type":"BlogPosting","headline":"Framework of Power Theft Detector Model","dateModified":"2020-11-02T00:00:00-06:00","datePublished":"2020-11-02T00:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://ajakaiye33.github.io/DataMusings/markdown/2020/11/02/power_theft.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/DataMusings/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://ajakaiye33.github.io/DataMusings/feed.xml" title="DataPonderings" /><link rel="shortcut icon" type="image/x-icon" href="/DataMusings/images/favicon.ico"><link href="https://cdn.jsdelivr.net/npm/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/DataMusings/">DataPonderings</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/DataMusings/about/">About Me</a><a class="page-link" href="/DataMusings/search/">Search</a><a class="page-link" href="/DataMusings/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Framework of Power Theft Detector Model</h1><p class="page-description">How I Approach A Data Problem.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-11-02T00:00:00-06:00" itemprop="datePublished">
        Nov 2, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      5 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/DataMusings/categories/#markdown">markdown</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h3"><a href="#introduction">Introduction</a></li>
<li class="toc-entry toc-h3"><a href="#import-necessary-packages-and-modules">Import Necessary Packages and Modules</a></li>
<li class="toc-entry toc-h3"><a href="#making-sense-of-the-data">Making Sense of The Data</a></li>
<li class="toc-entry toc-h3"><a href="#data-cleaning-and-preprocessing">Data Cleaning and Preprocessing</a>
<ul>
<li class="toc-entry toc-h6"><a href="#load-data-into-the-pandas-package-and-display-a-small-portion">Load data into the pandas package and display a small portion</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#correlation-and-outlier">Correlation and Outlier</a></li>
<li class="toc-entry toc-h3"><a href="#check-feature-importance">Check Feature Importance</a></li>
<li class="toc-entry toc-h3"><a href="#base-model">Base Model</a></li>
<li class="toc-entry toc-h3"><a href="#build-various-random-model">Build Various Random Model</a></li>
</ul><p><img src="/images/theft.png" alt=""></p>

<h3 id="introduction">
<a class="anchor" href="#introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction</h3>
<p>I consider myself an incurable continuous learner. You won’t agree with me less when I say the capacity and ability to learn, re-learn and unlearn is a crucial skill in this current era of information explosion.
Little wonder when Edvancer Venture and University of Petroleum and Energy Studies combined to create the Post Graduate Professional Certificate in Data science; I seized the opportunity and enrolled as soon as possible.</p>

<p>The course is group into the following broad areas:</p>

<ul>
  <li>
    <p>Fundamental knowledge about Data Science, Data Analytics, Machine Learning and their importance to businesses and organizations</p>
  </li>
  <li>
    <p>Introduction to the primary programming language of Data Science and Machine Learning: R &amp; Python</p>
  </li>
  <li>
    <p>Hands-on and practical session on data handling cleaning and Model building</p>
  </li>
  <li>
    <p>Student Capstone Project wherein students apply all they have learned to solve data-related problems in the following sectors:</p>

    <ul>
      <li>Aviation</li>
      <li>Banking &amp; Finance</li>
      <li>E-Commerce</li>
      <li>Logistics &amp; Supply Chain</li>
      <li>Energy</li>
    </ul>
  </li>
</ul>

<p>My favourite aspect of the program is the Capstone Project session because it provides an opportunity to practice on real-life datasets. I chose the Capstone on Energy as the problem of Energy theft was particularly dear to my heart. I have withness the problem first hand in my former residence, and I could remember asking why was such impunity not detected and the culprit made to face the consequences of the crime of Energy theft as enshrined in the Law.
Thus curiosity and the passion to apply my newly acquired skills to practical use informed my decision to work on Energy Theft Detector Model.</p>

<p>Consequently, today’s post is a chronicle of how I built an Energy theft Detector model.
For easy comprehension, we divided the project into the following sub-themes:</p>

<ul>
  <li>Making Sense of the Data</li>
  <li>Data cleaning and pre-processing</li>
  <li>Correlations and Outliers</li>
  <li>Check Feature Importance</li>
  <li>Simple Base-model</li>
  <li>Building model</li>
</ul>

<h3 id="import-necessary-packages-and-modules">
<a class="anchor" href="#import-necessary-packages-and-modules" aria-hidden="true"><span class="octicon octicon-link"></span></a>Import Necessary Packages and Modules</h3>
<p>The knowledge of the requisite package to use in a given project or problem depends on the experience of the practitioner and the level of work to be done.</p>

<p><img src="/images/package.png" alt=""></p>

<h3 id="making-sense-of-the-data">
<a class="anchor" href="#making-sense-of-the-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Making Sense of The Data</h3>
<p>In any machine learning or data science project, the data is about the most important aspect. The level to which you understand the data is base on domain knowledge of the practitioner. I had to go the extra mile to understand the data and all of its variable. Data research is essentially necessary when the problem is not under your primary domain knowledge. To this end, I read far and wide to get a sense the meaning behind the various variables and ultimately produce a data dictionary:</p>

<p><img src="/images/data_dict.png" alt=""></p>

<h3 id="data-cleaning-and-preprocessing">
<a class="anchor" href="#data-cleaning-and-preprocessing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data Cleaning and Preprocessing</h3>

<h6 id="load-data-into-the-pandas-package-and-display-a-small-portion">
<a class="anchor" href="#load-data-into-the-pandas-package-and-display-a-small-portion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Load data into the pandas package and display a small portion</h6>

<pre><code class="language-Python">elect_data = pd.read('Power_theft.csv')
elect_data.head()
</code></pre>
<p><img src="/images/data_head.png" alt=""></p>

<p>From the above data, our target variable is <code class="language-plaintext highlighter-rouge">global_active_power</code>. In other words, <code class="language-plaintext highlighter-rouge">global_active_power</code> is our dependent variable, whereas other variables are our independent variables.
Since our dependent variable data type is float or decimal, our model would invariably be linear regression, a prevalent supervised learning machine learning model. Before any further operations on the data, it is necessary to check for missing values and treat accordingly.</p>

<p><img src="/images/pct_missing.png" alt=""></p>

<p><img src="/images/missing_viz.png" alt=""></p>

<h3 id="correlation-and-outlier">
<a class="anchor" href="#correlation-and-outlier" aria-hidden="true"><span class="octicon octicon-link"></span></a>Correlation and Outlier</h3>

<p>Before I go further into the procedures and steps taken in the course of building the model, I will like to stress an essential concept I learned about the dependent variable. From my research, I decipher that ‘active power’ is a useful power; thus, the energy that powers our electronics, bulb, heater e.t.c. In an ideal system, the amount of power supplied should equate the amount of power utilized within a given period. Consequently, the simplest means to detect irregular consumption of power would be through outlier detection. Thus Utility customers with an unusual amount of consumption of electricity, especially when compared with the amount of electricity supplied, such usage or consumption may be deem or considered suspicious.</p>

<p><img src="/images/heat_map.png" alt=""></p>

<p>From the above visualization we understand the correlation coefficient of the various variables. However, we stand a better chance of understanding the correlation of other variables, i.e. independent variables with the target variable or independent variable.</p>

<p><img src="/images/feature_corr.png" alt=""></p>

<p><img src="/images/box_plot.png" alt=""></p>

<p>We can see very clearly that there are a few irregulars activate power amount via the above box plot.</p>

<h3 id="check-feature-importance">
<a class="anchor" href="#check-feature-importance" aria-hidden="true"><span class="octicon octicon-link"></span></a>Check Feature Importance</h3>
<p>Knowing the key features of your model would go a long way to improve the overall performance of the model. It would also provide rich information about the features that can make or break our model.
Tree-based algorithms like Decision tree, Random Forest e.t.c are suitable for knowing essential features in your models.</p>

<p><img src="/images/features.png" alt=""></p>

<h3 id="base-model">
<a class="anchor" href="#base-model" aria-hidden="true"><span class="octicon octicon-link"></span></a>Base Model</h3>
<p>Having a base model is a critical step to the art and craft of model building. Through a base model, the practitioner can effectively measure and compare model performance and improvement. We can implement a base model with the scikit-learn dummy model function. Personally, I usually, if it is a Linear Regression problem, customize mine as follows:</p>

<pre><code class="language-Python"># Find the mean of the target variable
meansimple = elect_theft_trim['global_active_power'].mean()
print(meansimple)

#We use the numpy repeat function to simulate a predicition
y_base = elect_theft_trim['global_active_power'].values
y_pred = np.repeat(meansimple,len(elect_theft_trim['global_active_power']))

#let also show that R_square is equal to zero.
r2_score(y_base,y_pred)
</code></pre>

<h3 id="build-various-random-model">
<a class="anchor" href="#build-various-random-model" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build Various Random Model</h3>
<p>A popular cliche in machine learning says: All models are wrong, but some are useful. The wisdom behind this axiom stems from the fact that as a practitioner no one model is right for a problem hence one must cultivate the habit of building several models as a veritable means of knowing which may be useful or practical for the situation or data at hand.
The approach is to create a different version of the primary dataset base on other functionalities carried out on the dataset. For instance, in the Power theft problem, I made the following versions:</p>

<ul>
  <li>Original Data: This usually the untampered version of our original datasets</li>
  <li>Standardized Data: Some school of thought opined that regression model performs better when the data is Standardized</li>
  <li>PCA Reduction Data: There may also be the need to reduce the variables of datasets through Principle Component Analysis.</li>
</ul>

<p>I usually pass these versions through various algorithms via a giant loop to check their respective performance. I call this process, Out-of-the-box-models.</p>

<p><img src="/images/perform.png" alt=""></p>

<p>From the above, we can choose the models with the best F1 score for further tuning and improvement.
The above steps are the way and manner I approach model Building and machine learning task. I hope you have learned something today.
Bye!</p>

  </div><a class="u-url" href="/DataMusings/markdown/2020/11/02/power_theft.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/DataMusings/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/DataMusings/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/DataMusings/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Data gymnastics... Enter Zen from there!.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://twitter.com/ajakzheddy" title="ajakzheddy"><svg class="svg-icon grey"><use xlink:href="/DataMusings/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
